(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{175:function(s,e,a){"use strict";a.r(e);var n=a(0),r=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"nodejs-前後端開發實戰"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nodejs-前後端開發實戰","aria-hidden":"true"}},[s._v("#")]),s._v(" NodeJS 前後端開發實戰")]),s._v(" "),a("h2",{attrs:{id:"express-node-js-web-應用程式架構"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#express-node-js-web-應用程式架構","aria-hidden":"true"}},[s._v("#")]),s._v(" Express - Node.js Web 應用程式架構")]),s._v(" "),a("h3",{attrs:{id:"params-取得指定路徑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#params-取得指定路徑","aria-hidden":"true"}},[s._v("#")]),s._v(" params - 取得指定路徑")]),s._v(" "),a("blockquote",[a("p",[a("em",[s._v("params 是一個物件, 會自動取得網址列 ':' 之後的參數並且變成自己的屬性")])])]),s._v(" "),a("p",[a("strong",[s._v("使用方式, 例如 :")])]),s._v(" "),a("ul",[a("li",[s._v("req.params (所有屬性)")]),s._v(" "),a("li",[s._v("req.params.name (指定屬性)")])]),s._v(" "),a("p",[a("strong",[s._v("範例一")])]),s._v(" "),a("p",[a("em",[s._v("路徑 :")])]),s._v(" "),a("p",[a("code",[s._v("localhost:8080/user/tom")])]),s._v(" "),a("p",[a("em",[s._v("代碼 : 渲染 name 到指定路經")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("app.get('/user/:name', (req, res) => {\n  res.send(req.params.name)\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[s._v("範例二")])]),s._v(" "),a("p",[a("em",[s._v("路徑 :")])]),s._v(" "),a("p",[a("code",[s._v("localhost:8080/tom/1013")])]),s._v(" "),a("p",[a("em",[s._v("代碼 : 渲染 name 和 date")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("app.get('/user/:name/:date', (req, res) => {\n  res.send(`\n    hello, ${req.params.name}, 今天是 ${req.params.date}\n  `)\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("br"),s._v(" "),a("h3",{attrs:{id:"query-取得網址參數"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#query-取得網址參數","aria-hidden":"true"}},[s._v("#")]),s._v(" query = 取得網址參數")]),s._v(" "),a("blockquote",[a("p",[a("em",[s._v("query 是一個物件, 會自動取得網址列 '?' 之後的參數並且變成自己的屬性")])])]),s._v(" "),a("p",[a("strong",[s._v("範例一 : 某某人的音樂列表, 抓前 10 筆")])]),s._v(" "),a("p",[a("em",[s._v("路徑 :")])]),s._v(" "),a("p",[a("code",[s._v("localhost:8080/tom?limit=10")])]),s._v(" "),a("p",[a("em",[s._v("代碼 :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("app.get('/user/:name/', (req, res) => {\n  const name = req.params.name\n  const limit = req.query.limit\n  res.send(`\n    ${name} 想要找 ${limit} 筆資料\n  `)\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("br"),s._v(" "),a("p",[a("strong",[s._v("範例二 : 某某人的音樂列表, 抓關鍵字是 hello 的前 10 筆資料")])]),s._v(" "),a("p",[a("em",[s._v("路徑 :")])]),s._v(" "),a("p",[s._v("localhost:8080/tom?limit=10&q=hello")]),s._v(" "),a("p",[a("em",[s._v("代碼 :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("app.get('/user/:name/', () => {\n  const name = req.params.name\n  const limit = req.query.limit\n  const q = req.query.q\n  res.send(`\n    ${name} 想要找關鍵字叫做 ${q} 的前 ${limit} 筆資料 \n  `)\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("br"),s._v(" "),a("h3",{attrs:{id:"middleware-中介軟體-上"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#middleware-中介軟體-上","aria-hidden":"true"}},[s._v("#")]),s._v(" middleware - 中介軟體 (上)")]),s._v(" "),a("blockquote",[a("p",[a("em",[s._v("Middleware 是 Express 一個很重要的題目, 類似守門員的概念")])])]),s._v(" "),a("p",[a("strong",[s._v("代碼")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("app.use((req,res,next) => {\n  ....\n  next()\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("next 函式會進入下一個門 (API), 如果沒有 next 函示網頁會卡住")]),s._v(" "),a("br"),s._v(" "),a("p",[a("strong",[s._v("範例 : middleware 驗證資料, 通過後才進入首頁")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// 守門員\napp.use((req, res, next) => {\n  console.log('有人進來囉')\n  next()\n})\n\n// 首頁\napp.get('/', (req, res) => {\n  res.send(`這是首頁`)\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("br"),s._v(" "),a("h3",{attrs:{id:"middleware-中介軟體-中"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#middleware-中介軟體-中","aria-hidden":"true"}},[s._v("#")]),s._v(" middleware - 中介軟體 (中)")]),s._v(" "),a("blockquote",[a("p",[a("em",[s._v("網站一定要有 404 頁面 (查無此頁)")])])]),s._v(" "),a("p",[a("strong",[s._v("範例")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("app.use((req, res, next) => {\n  res.status(404).send(`抱歉您的頁面找不到`))\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("br"),s._v(" "),a("blockquote",[a("p",[a("em",[s._v("網站也要有 500 頁面 (程式錯誤)")])])]),s._v(" "),a("p",[a("strong",[s._v("範例")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("app.use((err, req, res, next) => {\n  res.status(500).send(`程式有些問題, 請稍後嘗試`)\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("em",[a("strong",[s._v("404, 500 頁面通常置於 app.listen(port) 之前 (檔案最後)")])])]),s._v(" "),a("br"),s._v(" "),a("h3",{attrs:{id:"middleware-中介軟體-下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#middleware-中介軟體-下","aria-hidden":"true"}},[s._v("#")]),s._v(" middleware - 中介軟體 (下)")]),s._v(" "),a("blockquote",[a("p",[a("em",[s._v("我們可以把 middleware 獨立出來變成一個函示 (模組化)")])])]),s._v(" "),a("p",[a("strong",[s._v("範例一")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// 中介函式\nconst login = (req, res, next) => {\n  const _url = req.url\n  if (_url !== '/') {\n    next()\n  } else {\n    res.send(`您的登入資料有錯 !`)\n  }\n}\n\n// 路由函式\nconst homePage = (req, res) => {\n  res.send(`這是首頁`)\n}\n\napp.use(login)\napp.get('/', homePage)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("br"),s._v(" "),a("p",[a("strong",[s._v("範例二 : 更簡潔的寫法, 把中介軟體和路由函式同時變成參數傳入")])]),s._v(" "),a("p",[a("code",[s._v("app.get(路徑, 守門員, 頁面)")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("app.get('/', login, homePage)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("br"),a("br")]),s._v(" "),a("h3",{attrs:{id:"static-載入靜態檔案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#static-載入靜態檔案","aria-hidden":"true"}},[s._v("#")]),s._v(" static - 載入靜態檔案")]),s._v(" "),a("p",[a("strong",[s._v("範例一 :")])]),s._v(" "),a("p",[a("em",[s._v("增加靜態檔案的路徑")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("app.use(express.static('public'))\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("範例二 :")])]),s._v(" "),a("p",[a("em",[s._v("在首頁渲染出 logo (路徑 : /images/logo.png)")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const homePage = (req, res) => {\n  res.send(`\n    <img src=\"/images/logo.png\">\n  `)\n}\n\napp.use(express.static('public'))\n\napp.get('/', homePage)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[a("br"),a("br")]),s._v(" "),a("h3",{attrs:{id:"ejs-語言介紹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ejs-語言介紹","aria-hidden":"true"}},[s._v("#")]),s._v(" EJS - 語言介紹")]),s._v(" "),a("p",[a("em",[s._v("EJS 是樣板語言, 類似的有 pug, handlebars 等. 樣板語言的好處是...")])]),s._v(" "),a("h3",{attrs:{id:"ejs-環境安裝"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ejs-環境安裝","aria-hidden":"true"}},[s._v("#")]),s._v(" EJS - 環境安裝")]),s._v(" "),a("p",[a("code",[s._v("npm i ejs-locals -S")])]),s._v(" "),a("p",[a("em",[s._v("路徑 :")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("/views/index.ejs")])]),s._v(" "),a("li",[a("code",[s._v("/views/user.ejs")])])]),s._v(" "),a("p",[a("strong",[s._v("範例 :")])]),s._v(" "),a("p",[a("em",[s._v("EJS 初始化")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const engine = require('ejs-locals')\n\napp.engine('ejs', engine)\napp.set('views', './views')\napp.set('view engine', 'ejs')\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("br"),s._v(" "),a("p",[a("em",[s._v("在 '/' 路徑下呼叫 index.js")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const homePage = (req, res) => {\n  res.render('index')\n}\n\napp.get('/', homePage)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("渲染 index.ejs "),a("code",[s._v("res.render(index)")])])]),s._v(" "),a("br"),s._v(" "),a("p",[a("em",[s._v("在 '/user' 路徑下呼叫 user.js")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const userPage = (req, res) => {\n  res.render('user')\n}\n\napp.get('/', userPage)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("br"),s._v(" "),a("h3",{attrs:{id:"ejs-參數導入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ejs-參數導入","aria-hidden":"true"}},[s._v("#")]),s._v(" EJS - 參數導入")]),s._v(" "),a("p",[a("strong",[s._v("範例 : "),a("em",[s._v("後端傳物件資料到前端")])])]),s._v(" "),a("p",[a("em",[a("strong",[s._v("後端 :")])])]),s._v(" "),a("p",[s._v("在 "),a("code",[s._v("res.render()")]),s._v(" 加入要傳送的資料 (物件)")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const homePage = (req, res) => {\n  res.render('index', {'title': '六角學院'})\n}\n\napp.get('/', homePage)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("br"),s._v(" "),a("p",[a("em",[a("strong",[s._v("前端")])])]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("<%= %>")]),s._v(" 呈現資料")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<body>\n  <h1>\n    <%= title %>\n  </h1>\n</body>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("br"),s._v(" "),a("h3",{attrs:{id:"ejs-載入內容種類"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ejs-載入內容種類","aria-hidden":"true"}},[s._v("#")]),s._v(" EJS - 載入內容種類")]),s._v(" "),a("p",[a("strong",[s._v("範例 : "),a("em",[s._v("後端傳 html 資料到前端")])])]),s._v(" "),a("p",[a("em",[a("strong",[s._v("後端")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("res.render('index', {\n  'title': '<h1>六角學院</h1>'\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("br"),s._v(" "),a("p",[a("em",[a("strong",[s._v("前端")])])]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("<%- %>")]),s._v(" 呈現資料")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<%- title %>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("br"),s._v(" "),a("p",[a("strong",[s._v("範例 : 使用 "),a("code",[s._v("<% %>")]),s._v(" 做 javascript 邏輯運算")])]),s._v(" "),a("p",[a("em",[a("strong",[s._v("後端")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("res.render('index', {\n  'show': true,\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("br"),s._v(" "),a("p",[a("em",[a("strong",[s._v("前端")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<% if (show) %>\n  <span>資料有呈現</span>\n<% } %>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("br"),s._v(" "),a("h3",{attrs:{id:"ejs-載入陣列"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ejs-載入陣列","aria-hidden":"true"}},[s._v("#")]),s._v(" EJS 載入陣列")]),s._v(" "),a("hr"),s._v(" "),a("p",[a("strong",[s._v("範例 : 渲染 list item")])]),s._v(" "),a("p",[a("em",[a("strong",[s._v("後端")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const homePage = (req, res) => {\n  res.render('index', {\n    'courses': [\n      'html',\n      'css',\n      'javascript',\n      'php'\n    ]\n  })\n}\n\napp.get('/', homePage)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("br"),s._v(" "),a("p",[a("em",[a("strong",[s._v("前端")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<body>\n  <ul>\n  <% for(let i=0; courses.length>i; i++) { %>\n    <li>\n      <%- courses[i] %>\n    </li>\n  <% } %>\n  </ul>\n</body>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("br"),s._v(" "),a("h3",{attrs:{id:"ejs-設定-layout"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ejs-設定-layout","aria-hidden":"true"}},[s._v("#")]),s._v(" EJS 設定 Layout")]),s._v(" "),a("p",[a("em",[a("strong",[s._v("除了保留 body 的內容, 其餘的變成 layout => "),a("code",[s._v("<% layout('layout') %>")])])])]),s._v(" "),a("p",[a("em",[a("strong",[s._v("把共用的 "),a("code",[s._v("html")]),s._v(" 標籤區塊 "),a("code",[s._v("(head)")]),s._v(" 獨立出來成一個模組 "),a("code",[s._v("(layout.ejs)")]),s._v(", 在每個網頁頭部引入 "),a("code",[s._v("<% layout('layout') %>")])])])]),s._v(" "),a("p",[a("code",[s._v("/views/layout.ejs")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <title>Welcome to Glitch!</title>\n    <meta name="description" content="A cool thing made with Glitch">\n    <link id="favicon" rel="icon" href="https://glitch.com/edit/favicon-app.ico" type="image/x-icon">\n    <meta charset="utf-8">\n    <meta http-equiv="X-UA-Compatible" content="IE=edge">\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n    <link rel="stylesheet" href="/style.css">\n    <script src="/client.js" defer><\/script>\n  </head>\n  <body>\n    <%- body %>\n  </body>\n</html>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("br"),s._v(" "),a("p",[a("code",[s._v("/views/index.ejs")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<% layout('layout') %> \n\n<h1><%- title %></h1>\n\n<h2><%= boss %></h2>\n\n<ul>\n<% for(var i=0; courses.length>i; i++) { %>\n  <li><%- courses[i] %></li>\n<% } %>  \n</ul>  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("br"),s._v(" "),a("p",[a("code",[s._v("/views/user.ejs")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<% layout('layout') %>\n\n<h1>user page</h1>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("br"),s._v(" "),a("h3",{attrs:{id:"postman-api-管理工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#postman-api-管理工具","aria-hidden":"true"}},[s._v("#")]),s._v(" Postman - API 管理工具")]),s._v(" "),a("p",[a("em",[a("strong",[s._v("API 設計 - AJAX get, post 向後端傳遞資料")])])]),s._v(" "),a("p",[s._v("下載並安裝 Postman")]),s._v(" "),a("br"),s._v(" "),a("h3",{attrs:{id:"postman-取得-get-資料-基礎操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#postman-取得-get-資料-基礎操作","aria-hidden":"true"}},[s._v("#")]),s._v(" Postman - 取得 get 資料, 基礎操作")]),s._v(" "),a("p",[s._v("建立資料夾, 儲存網址")]),s._v(" "),a("br"),s._v(" "),a("h3",{attrs:{id:"body-parser-取得表單資料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#body-parser-取得表單資料","aria-hidden":"true"}},[s._v("#")]),s._v(" body-parser - 取得表單資料")]),s._v(" "),a("p",[a("em",[a("strong",[s._v("把前端表單的資料傳送到後端")])])]),s._v(" "),a("p",[a("em",[s._v("安裝 body-parser :")]),s._v(" "),a("code",[s._v("npm i body-parser -S")])]),s._v(" "),a("p",[a("em",[a("code",[s._v("server.js")]),s._v(" : 引入 body-parser :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const bodyParser = require('body-parser')\n\n// 增加 body 解析\napp.use(bodyParser.json())\n\n// 解析表單資料\napp.use(bodyParser.urlencoded({extended: false}))\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("br"),s._v(" "),a("p",[a("em",[a("strong",[s._v("前端")])]),s._v(" "),a("code",[s._v("search.ejs")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<form action="/searchList" method="post">\n  <input type="text" name="title" value="">\n  <input type="text" name="keyword" value="">\n  <input type="submit" name="" value="送出">\n</form>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("em",[a("strong",[s._v("注意 :")])])]),s._v(" "),a("ul",[a("li",[s._v("傳統表單的 form 標籤有 action 和 method 兩個屬性")]),s._v(" "),a("li",[s._v("按下送出鍵傳送資料到後端伺服器網址")]),s._v(" "),a("li",[s._v("action=\"/searchLIst\" : 資料要被傳送到 '/searchList' 網址")]),s._v(" "),a("li",[s._v('method="post": 使用 post 方法傳送資料')]),s._v(" "),a("li",[s._v('name 屬性的資料 "title" 和 "keyword" 是要被傳送到後端的資料 !!!')])]),s._v(" "),a("br"),s._v(" "),a("p",[a("em",[a("strong",[s._v("後端")])]),s._v(" "),a("code",[s._v("server.js")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const form = () => {\n  console.log(req.body)\n}\n\n// 使用者傳送資料到後端伺服器\napp.post('/searchList', form)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("strong",[s._v("req.body 是一個物件, 用來接收前端表單 input 標籤的 name 屬性傳來的資料")])]),s._v(" "),a("br"),s._v(" "),a("h3",{attrs:{id:"redirect-跳轉頁面設定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redirect-跳轉頁面設定","aria-hidden":"true"}},[s._v("#")]),s._v(" Redirect 跳轉頁面設定")]),s._v(" "),a("p",[a("em",[s._v("轉址命令 :")]),s._v(" "),a("code",[s._v("res.redirect(路徑/頁面)")])]),s._v(" "),a("p",[a("em",[s._v("承上例, 表單輸入完成送出後轉址到 search 頁面")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const form = (req, res) => {\n  console.log(req.body)\n\n  // 轉址到 search.ejs\n  res.redirect('search')\n}\napp.post('/searchList', form)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("br"),s._v(" "),a("h3",{attrs:{id:"使用-postman-傳送表單資訊"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-postman-傳送表單資訊","aria-hidden":"true"}},[s._v("#")]),s._v(" 使用 postman 傳送表單資訊")]),s._v(" "),a("p",[a("em",[s._v("承上例 : 使用 Postman 傳送表單資料到後端伺服器")])]),s._v(" "),a("p",[a("strong",[s._v("步驟")])]),s._v(" "),a("ul",[a("li",[s._v("建立並命名資料夾 : bodyParser-basic")]),s._v(" "),a("li",[s._v("選擇 POST")]),s._v(" "),a("li",[s._v("網址列輸入 : "),a("code",[s._v("https://bodyparser-basic.glitch.me/searchList")])]),s._v(" "),a("li",[s._v("點選 body")]),s._v(" "),a("li",[s._v("選擇 x-www-form-urlencoded")]),s._v(" "),a("li",[s._v("Key tab 輸入 title, Value tab 輸入 avengers")]),s._v(" "),a("li",[s._v("Key tab 輸入 keywords, Value tab 輸入 super hero")]),s._v(" "),a("li",[s._v("按下 Send 按鍵")]),s._v(" "),a("li",[s._v("檢查後端的 Logs, 會印出 { title: 'avengers', keyword: 'super hero'}")])]),s._v(" "),a("br"),s._v(" "),a("h3",{attrs:{id:"post-前後端介接原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#post-前後端介接原理","aria-hidden":"true"}},[s._v("#")]),s._v(" POST 前後端介接原理")]),s._v(" "),a("p",[a("em",[s._v("此章節省略, 傳送傳統表單")])]),s._v(" "),a("h3",{attrs:{id:"post-ajax-前後端介接原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#post-ajax-前後端介接原理","aria-hidden":"true"}},[s._v("#")]),s._v(" POST AJAX 前後端介接原理")]),s._v(" "),a("p",[a("em",[s._v("使用 Ajax 在不跳轉頁面的情形下傳送資料")])]),s._v(" "),a("p",[a("em",[a("strong",[s._v("路由")])]),s._v(" "),a("code",[s._v("/searchAJAX'")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const formAJAX = (req, res) => {\n  res.send(`hello`)\n}\n\napp.post('/searchAJAX', formAJAX)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("br"),s._v(" "),a("p",[a("em",[a("strong",[s._v("建立 Postman API")])])]),s._v(" "),a("p",[a("strong",[s._v("步驟")])]),s._v(" "),a("ul",[a("li",[s._v("在 bodyParser-basic 資料夾建立路由 : "),a("code",[s._v("https://bodyparser-basic.glitch.me/searchAJAX")])]),s._v(" "),a("li",[s._v("按下 Send 按鍵, 下面的 console 區塊顯示 'hello' 字串")])]),s._v(" "),a("br"),s._v(" "),a("p",[a("em",[a("strong",[s._v("在 search.ejs 增加 AJAX 表單")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<form>\n  <input type="text" id="myKey" value="">\n  <input type="submit" id="send" value="送出">\n</form>\n\n<script>\nconst myKey = document.querySelector(\'#myKey\')\nconst send = document.querySelector(\'#send\')\n\nsend.addEventListener(\'click\', e => {\n  e.preventDefault()\n\n  const keyword = myKey.value\n  \n  // 傳送資料到後端\n  fetch(\'/searchAJAX\', {\n    method: \'post\',\n    headers: {  \n      \'Content-Type\': \'application/json\'\n    },\n    body: JSON.stringify({  \n      keyword,\n      fruit: ["蘋果", "香蕉", "芭樂"]\n    })\n  })\n  .then(res => res.json())\n  .then(data => console.log(data))\n}\n<\/script>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])]),a("p",[a("strong",[s._v("注意 :")])]),s._v(" "),a("ul",[a("li",[s._v("form 標籤不需要 action 和 method 屬性")]),s._v(" "),a("li",[s._v("input 標籤要加上 id, 讓我們能用 javascript 操作 DOM 元素")]),s._v(" "),a("li",[s._v("input 標籤不需要 name 屬性")])]),s._v(" "),a("br"),s._v(" "),a("p",[a("em",[a("strong",[s._v("後端代碼")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const form = (req, res) => {\n  console.log(req.body)\n  console.log(`搜尋的關鍵字 : ${req.body.keyword}`)\n  res.redirect('/search')\n}\n\napp.post('/searchAJAX', formAJAX)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("br"),s._v(" "),a("p",[a("em",[a("strong",[s._v("使用 postman 傳送資料")])])]),s._v(" "),a("p",[a("strong",[s._v("步驟")])]),s._v(" "),a("ul",[a("li",[s._v("在 bodyParser-basic 資料夾建立網址 : "),a("code",[s._v("https://bodyparser-basic.glitch.me/searchAJAX")])]),s._v(" "),a("li",[s._v("按下 Send 按鍵")]),s._v(" "),a("li",[s._v("下方 console 區會回傳 hello 字串")])]),s._v(" "),a("br"),s._v(" "),a("h3",{attrs:{id:"postman-post-ajax-json-格式講解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#postman-post-ajax-json-格式講解","aria-hidden":"true"}},[s._v("#")]),s._v(" Postman - POST AJAX JSON 格式講解")]),s._v(" "),a("p",[a("em",[a("strong",[s._v("用 postman 模擬 json 格式")])])]),s._v(" "),a("p",[a("strong",[s._v("步驟")])]),s._v(" "),a("ul",[a("li",[s._v("路徑 : https://bodyparser-basic.glitch.me/searchAJAX")]),s._v(" "),a("li",[s._v("Body 標籤點選 raw")]),s._v(" "),a("li",[s._v("選擇 JSON (application/json)")]),s._v(" "),a("li",[s._v('textarea 寫 {"keyword": "哈利波特"}')]),s._v(" "),a("li",[s._v('按下 Send 按鈕, 下面 teatarea 出現 "資料傳送成功 !"')])]),s._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")])]),s._v(" "),a("br"),s._v(" "),a("h3",{attrs:{id:"router-進階設定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#router-進階設定","aria-hidden":"true"}},[s._v("#")]),s._v(" Router 進階設定")]),s._v(" "),a("p",[a("strong",[s._v("把 server.js 的路由拆開成獨立的檔案 (模組化)")])]),s._v(" "),a("p",[a("em",[a("strong",[s._v("建立兩個路由")])])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("/user/edit-profile")])]),s._v(" "),a("li",[a("code",[s._v("/user/photo")])])]),s._v(" "),a("p",[a("em",[a("strong",[s._v("server.js")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const express = require('express');\nconst app = express();\nconst port = process.env.PORT || 3000\n\nconst editProfile = (req, res) => {\n  res.send('profile')\n}\nconst photo = (req, res) => {\n  res.send('photo')\n}\n \napp.get('/edit-profile', editProfile)\napp.get('/photo', photo)\n\napp.listen(port)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("br"),s._v(" "),a("p",[a("em",[a("strong",[s._v("建立 /routes/user.js, 把路由移到這裡")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const express = require('express')\nconst router = express.Router()\n\nconst editProfile = (req, res) => {\n  res.send('profile')\n}\n\nconst photo = (req, res) => {\n  res.send('photo')\n}\n \nrouter.get('/edit-profile', editProfile)\n\nrouter.get('/photo', photo)\n\nmodule.exports = router\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("br"),s._v(" "),a("p",[a("em",[a("strong",[s._v("server.js 變成這樣")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const express = require('express');\nconst app = express();\nconst port = process.env.PORT || 3000\nconst user = require('./routes/user')\n\napp.use('/user', user)\n\napp.listen(port)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("br"),s._v(" "),a("h3",{attrs:{id:"express-generator-上"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#express-generator-上","aria-hidden":"true"}},[s._v("#")]),s._v(" express-generator (上)")]),s._v(" "),a("p",[a("em",[a("strong",[s._v("安裝 express-generator :")])])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("npm i express-generator -g")])])]),s._v(" "),a("p",[a("em",[a("strong",[s._v("建立 firebase-nodejs 資料夾並安裝 ejs")])])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("express --view=ejs firebase-nodejs")])])]),s._v(" "),a("p",[a("em",[a("strong",[s._v("進入 firebase-nodejs 資料夾, 安裝模組 (dependencies)")])])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("npm i")])])]),s._v(" "),a("br"),s._v(" "),a("h3",{attrs:{id:"express-generator-下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#express-generator-下","aria-hidden":"true"}},[s._v("#")]),s._v(" express-generator (下)")]),s._v(" "),a("hr"),s._v(" "),a("p",[a("em",[a("strong",[s._v("本章節省略")])])]),s._v(" "),a("br"),s._v(" "),a("h3",{attrs:{id:"開發項目介紹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#開發項目介紹","aria-hidden":"true"}},[s._v("#")]),s._v(" 開發項目介紹")]),s._v(" "),a("hr"),s._v(" "),a("p",[a("em",[a("strong",[s._v("1. 後端設計 RESTful API")])])]),s._v(" "),a("p",[a("em",[a("strong",[s._v("2. SPA(single page application) todolist")])])]),s._v(" "),a("br"),s._v(" "),a("h3",{attrs:{id:"express-整合-firebase-流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#express-整合-firebase-流程","aria-hidden":"true"}},[s._v("#")]),s._v(" Express 整合 Firebase 流程")]),s._v(" "),a("hr"),s._v(" "),a("p",[a("em",[a("strong",[s._v("步驟")])])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("安裝 firebase-admin 套件 : "),a("code",[s._v("npm firebase-admin -S")])])]),s._v(" "),a("li",[a("p",[s._v("開啟 Firebase console, 添加項目")])]),s._v(" "),a("li",[a("p",[s._v('settings 選項選擇 "項目設置"')])]),s._v(" "),a("li",[a("p",[s._v('選擇 "服務帳號" 標籤')])]),s._v(" "),a("li",[a("p",[s._v("Admin SDK 配置代碼段 點選 Node.js, 複製 textarea 內的代碼")])]),s._v(" "),a("li",[a("p",[s._v("將代碼貼到 server.js")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('const admin = require("firebase-admin");\n\nconst serviceAccount = require("path/to/serviceAccountKey.json");\n\nadmin.initializeApp({\n  credential: admin.credential.cert(serviceAccount),\n  databaseURL: "https://fir-login-97eec.firebaseio.com"\n});\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ul",[a("li",[a("p",[s._v('點擊 "生成新的私鑰", 選擇儲存路徑 (根目錄下)')])]),s._v(" "),a("li",[a("p",[s._v('const serviceAccount = require("/私鑰檔名")')])]),s._v(" "),a("li",[a("p",[s._v("測試 database")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const fireData = admin.database()\nconsole.log(direData)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])}],!1,null,null,null);e.default=r.exports}}]);